{% extends 'layout/base.html' %}
{% load static %}
{% block title %} {{ representative.representative }} Return Product from van | Dealer Solution BD{% endblock %}
{% block nav_bar %}
    <nav class="max-w-lg mx-auto px-4 py-2 bg-themeblue sticky top-0 z-10 flex justify-between items-center">
        <a href="{% url 'dealer:dsr-details' representative.pk %}" class="inline-block">
            <div
                    class="flex items-center p-2 text-white text-base active:bg-white/20 transition duration-150 ease-in-out">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                    <path fill-rule="evenodd"
                          d="M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z"
                          clip-rule="evenodd"/>
                </svg>
                <span class="ml-1 font-medium text-lg">{{ representative.representative }} হিসাব </span>
            </div>
        </a>
    </nav>
{% endblock %}
{% block main_content %}

    <section class="flex-1 flex-grow overflow-y-scroll">
        <form action="" method="post">
            {% csrf_token %}
            <div class="relative float-label-input mb-4">
                <input type="date" id="datePicker" name="datePicker" placeholder=" " required readonly
                       class="w-full bg-[#F6F9FC] focus:outline-none focus:shadow-outline border-[1.5px] border-gray-400 rounded py-3 px-3 h-[51px] block appearance-none leading-normal focus:border-gray-900">
                <label for="name"
                       class="absolute top-3 left-0 text-gray-400 pointer-events-none transition duration-200 ease-in-outbg-white px-2 text-grey-darker">
                    তারিখ</label>
            </div>
            <div id="productsContainer" class="h-full space-y-3 overflow-y-auto"></div>

            <div class="modal" id="conform-modal">
                <div class="modal-box">
                    <div class="mt-0 modal-action">
                        <a href="#" class="absolute btn btn-error btn-sm btn-circle btn-ghost right-2 top-2">✕</a>
                    </div>
                    <h3 class="text-lg font-bold">সারসংক্ষেপ</h3>
                    <div class="py-4">
                        <p class="text-lg text-slate-500">বিক্রয়মূল্য: ৳
                            <input type="text" name="selling_price" id="sellingPrice" value="0"
                                   class="focus:outline-none text-slate-800" readonly>
                        </p>
                        <p class="text-lg text-slate-500">ড্যামেজ: ৳
                            <input type="text" name="damage_price" id="damagePrice" value="0"
                                   class="focus:outline-none text-slate-800" readonly>
                        </p>
                        <p class="text-lg text-slate-500">মোট বিক্রয়মূল্য: ৳
                            <input type="text" name="total_selling_price" id="totalSellingPrice" value="0"
                                   class="focus:outline-none text-slate-800" readonly>
                        </p>
                        <p class="text-lg text-slate-500">ডিসকাউন্ট: ৳
                            <input type="number" name="discount" id="discount" min="0" value="0" step="0.001"
                                   class="pl-2 border rounded-md text-slate-800">
                        </p>
                        <p class="text-lg text-slate-500">সর্বমোট: ৳
                            <input type="number" name="final_amount" id="finalAmount" min="0" value="0"
                                   class="focus:outline-none text-slate-800" readonly>
                        </p>
                        <p class="text-lg text-slate-500">জমা: ৳
                            <input type="number" name="deposit" min="0" id="deposit" value="0" step="0.001"
                                   class="pl-2 border rounded-md text-slate-800">
                        </p>
                        <p class="text-lg text-slate-500">বাকি থাকে: ৳
                            <input type="number" name="due-cash" min="0" id="dueCash" value="0"
                                   class="focus:outline-none text-slate-800" readonly>
                        </p>
                        <button type="submit"
                                class="w-full px-5 py-3 mt-3 font-medium text-center text-white rounded-lg bg-themeblue hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 text-md">
                            নিশ্চিত করুন
                        </button>
                    </div>
                </div>
            </div>

        </form>
        <br>
        <a href="#conform-modal"
           class="w-full px-5 py-3 font-medium text-center text-white border-0 rounded-lg btn bg-themeblue hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 text-md">
            ঠিক আছে
        </a>
    </section>
{% endblock %}


{% block sidebar %}
    {% include 'layout/components/sidebar_dealer.html' %}
{% endblock %}


{% block custom_js %}
    <script src="{% static 'assets/js/dsr-calculations.js' %}"></script>
    <script>
        const datePicker = document.getElementById('datePicker');
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        datePicker.value = `${year}-${month}-${day}`;
    </script>
{% endblock %}

